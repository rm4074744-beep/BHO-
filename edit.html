<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edit Profile</title>
</head>

<body>

<h2>Edit Profile</h2>

<input type="text" id="name" placeholder="Name"><br><br>

<textarea id="bio" placeholder="Bio"></textarea><br><br>

<label>Profile Picture:</label><br>
<input type="file" id="profilePic"><br><br>

<label>Cover Picture:</label><br>
<input type="file" id="coverPic"><br><br>

<button onclick="saveProfile()">Save</button>

<br><br>
<a href="profile.html">Go Back</a>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, set, get } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey:"AIzaSyA1h3IIRC9la-kXyYnVEfwxzzoyBIL70Js"
  authDomain: "my-website-a0545.firebaseapp.com",
  databaseURL: "https://my-website-a0545-default-rtdb.firebaseio.com/",
  projectId: "my-website-a0545",
  storageBucket: "my-website-a0545.firebasestorage.app",
  messagingSenderId: "103602694974",
  appId: "1:103602694974:web:12f890844e6ad6a513da6f"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// Load existing data
function loadProfile(){
  get(ref(db, 'users/user1')).then((snapshot)=>{
      if(snapshot.exists()){
          document.getElementById("name").value = snapshot.val().name || "";
          document.getElementById("bio").value = snapshot.val().bio || "";
      }
  });
}

window.saveProfile = function(){

  let name = document.getElementById("name").value;
  let bio = document.getElementById("bio").value;

  set(ref(db, 'users/user1'), {
      name: name,
      bio: bio
  }).then(()=>{
      alert("Profile Updated!");
  });

}

loadProfile();

</script>

</body>
</html>
