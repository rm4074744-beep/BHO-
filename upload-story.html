<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Story Editor</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{margin:0;background:#000;color:#fff;font-family:sans-serif;overflow:hidden}

.editor-container{position:relative;width:100%;height:100vh}

.side-tools{
position:absolute;right:15px;top:60px;
display:flex;flex-direction:column;gap:15px;z-index:50;
}

.icon-bg{
width:44px;height:44px;
background:rgba(255,255,255,0.15);
border-radius:50%;
display:flex;justify-content:center;align-items:center;
cursor:pointer;
}

#music-panel{
position:absolute;bottom:-100%;left:0;
width:100%;height:75vh;
background:#121212;
border-radius:20px 20px 0 0;
transition:.4s;
display:flex;flex-direction:column;
z-index:200;
}

#music-panel.active{bottom:0}

.music-header{
padding:20px;
display:flex;justify-content:space-between;align-items:center;
border-bottom:1px solid #333;
}

.music-list{flex:1;overflow-y:auto;padding:15px}

.music-item{
display:flex;align-items:center;gap:15px;
padding:12px;border-radius:10px;
cursor:pointer;
transition:.2s;
}

.music-item:hover{background:#1e1e1e}

.music-item.active{background:#1db95433}

.music-thumb img{
width:50px;height:50px;border-radius:6px;object-fit:cover;
}

.footer{
position:absolute;bottom:20px;width:100%;
display:flex;justify-content:center;
}

.share-now{
padding:12px 25px;
border:none;border-radius:50px;
background:#e91e63;color:#fff;font-weight:bold;
}

/* Mini Player */

#miniPlayer{
position:absolute;
bottom:0;
left:0;
width:100%;
background:#1db954;
display:none;
align-items:center;
gap:12px;
padding:10px 15px;
}

#miniPlayer img{
width:40px;height:40px;border-radius:6px;
}

#miniPlayer .info{flex:1}

.control-btn{
background:none;border:none;color:#fff;
font-size:22px;cursor:pointer;
}
</style>
</head>

<body>

<div class="editor-container">

<canvas id="mainCanvas"></canvas>

<div class="side-tools">
<div class="icon-bg" onclick="openMusic()">
<span class="material-icons">music_note</span>
</div>
</div>

<div id="music-panel">
<div class="music-header">
<h3>Music Library</h3>
<span class="material-icons" onclick="closeMusic()">expand_more</span>
</div>
<div class="music-list" id="musicListContainer"></div>
</div>

<!-- Mini Player -->
<div id="miniPlayer">
<img id="miniThumb">
<div class="info">
<div id="miniTitle"></div>
<div id="miniArtist" style="font-size:12px"></div>
</div>
<button class="control-btn" onclick="togglePlay()">
<span class="material-icons" id="playIcon">pause</span>
</button>
</div>

<div class="footer">
<button class="share-now">Share Now</button>
</div>

</div>

<script>

const canvas=new fabric.Canvas('mainCanvas',{
width:window.innerWidth,
height:window.innerHeight
});

let currentAudio=new Audio();
let isPlaying=false;
let activeElement=null;

const musicData=[
{
title:"I ðŸ’• mapu",
artist:"by Raihan",
url:"https://hikfuhupljdyavztlhis.supabase.co/storage/v1/object/public/music-files/gemini_generated_video_1b6c0ba2.mp3",
thumb:"https://picsum.photos/200?1"
},
{
title:"â¤ï¸â¤ï¸â¤ï¸â¤ï¸Handi",
artist:"by samon",
url:"https://hikfuhupljdyavztlhis.supabase.co/storage/v1/object/public/music-files/gemini_generated_video_f360149b.mp3",
thumb:"https://picsum.photos/200?2"
}
];

function generateMusicLibrary(){
const container=document.getElementById("musicListContainer");
container.innerHTML="";
musicData.forEach(song=>{
const item=document.createElement("div");
item.className="music-item";
item.innerHTML=`
<div class="music-thumb"><img src="${song.thumb}"></div>
<div>
<h4>${song.title}</h4>
<p style="color:#aaa;font-size:12px">${song.artist}</p>
</div>
`;
item.onclick=()=>playMusic(song,item);
container.appendChild(item);
});
}

function playMusic(song,element){

if(activeElement) activeElement.classList.remove("active");
element.classList.add("active");
activeElement=element;

currentAudio.pause();
currentAudio=new Audio(song.url);
currentAudio.play();
isPlaying=true;

document.getElementById("miniPlayer").style.display="flex";
document.getElementById("miniTitle").innerText=song.title;
document.getElementById("miniArtist").innerText=song.artist;
document.getElementById("miniThumb").src=song.thumb;
document.getElementById("playIcon").innerText="pause";

closeMusic();
}

function togglePlay(){
if(isPlaying){
currentAudio.pause();
document.getElementById("playIcon").innerText="play_arrow";
}else{
currentAudio.play();
document.getElementById("playIcon").innerText="pause";
}
isPlaying=!isPlaying;
}

function openMusic(){
document.getElementById("music-panel").classList.add("active");
}

function closeMusic(){
document.getElementById("music-panel").classList.remove("active");
}

generateMusicLibrary();

</script>

</body>
</html>
